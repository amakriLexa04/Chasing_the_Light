#textdomain wesnoth-chasing_the_light

[scenario]
    id=02_Invasion
    name= _ "Invasion"
    map_data="{~add-ons/Chasing_the_Light/maps/02_Invasion.map}"

    victory_when_enemies_defeated=no
	dissalow_recall=no
	next_scenario=03_No_Hope
	carryover_percentage=40
	
		[story]
        [part]
            story= _ "Після бою Гаралін сховав відібрану в темного чаклуна книгу під своїм одягом і таємними шляхами повернувся до своєї хати, непомічений ніким. Зайшовши всередину, він знову відчув той самий голос:"
        [/part]
		
		[part]
            story= {CAPTION ( _ "???")} + _ "Гараліне, сьогодні ти отримав можливість здобути неймовірну силу та змінити весь світ. Але не дай їй підкорити та спотворити тебе, завжди йди шляхом Світла і воно направить тебе."
        [/part]
		
		[part]
            story= {CAPTION ( _ "Haralin")} + _ "Скажи мені нарешті, хто ти, чому на нас напали та що мені робити далі?"
        [/part]
		
		[part]
            story= {CAPTION ( _ "???")} + _ "...
			
Ти відчуєш та почуєш Світло, коли потребуватимеш його. До того ж, вивчай цю книгу, оберни її силу на світло та пізнай магію, вона тобі знадобиться..."
        [/part]
		
		[part]
            story= _ "Невідомі слова, що прозвучали в голові хлопця, переконали його, тому наступні багато років він витратив, проводячи свій вільний від тяжкої роботи час вивчаючи секрети забороненої книги, Гаралін закреслював темні слова, замінючи їх на звертання до Світла й намагався проказати хоча б найменше закляття, але навіть маючи при собі доволі детальний словник, дуже довго в нього не виходило практично нічого, крім простеньких трюків, якими може похвалитися майже будь-який гуляка на ярмарці."
        [/part]
		
		[part]
		    story= _ "Тим часом до села нарешті докотилися новини, що ті дивні бандюки насправді були загарбниками з невідомого — якоїсь далекої землі на заході. Люди Зеленого Острову стали називати їх 'весфольками', чи то ті волоцюги самі себе так називали, селяни не дуже в цьому розібралися, та й їх це не дуже цікавило. Вони взагалі не дуже хвилювалися щодо цього вторгнення й не вірили безглуздим чуткам про 'живих мерців', бо вони ж зовсім нещодавно перемогли цих голодранців і серед них ніяких мерців не було, хіба що якесь дивне чаклунство, але яка різниця — Королі у будь-якому випадку усіх захистять та проженуть 'весфольків' туди, звідки вони прийшли. "

		[/part]
		
			[part]
		    story= _ "Лише Гараліна та його батька дуже непокоїли ці події. Першого, бо внутрішнє чуття підказувало йому, що на північному заході Острову відбувалося щось дуже темне та неприроднє, а другого, бо він, як колишній солдат армії, розумів, що ті бандити були лише розвідувальною групою, а основне військо може бути в десятки разів могутніше."

		[/part]
		
		[part]
		story = _ "Але хлопець нікому не розповідав про свої чуття, щоб його не вважали диваком(з часом його-таки почали вважати диваком та підозрювати в різних речах), а його батько, хоч і був старійшиною та попереджав усіх про можливу небезпеку, згодом припинив бути авторитетом через свою хворобу та швидко наставшу старість, тому його роль звелася виключно до церемоніальної, бо старого дуже поважали за його здобутки та внесок у розвиток села."
		
		[/part]
		
		[part]
		story= _ "Через приблизно десяти років після нападу від правителя Блекмору надійшли ресурси та терміновий наказ укріпити прикордонні позиції. Селяни, хоч і не відчували потреби в цьому, все ж взялися втілювати в життя слова свого повелителя, якнайповільніше, виділяючи на це якнайменше часу, тому що потрібно було піклуватися про поля, худобу та й взагалі жити. Через це, навіть через три роки укріплення не були готові навіть на половину."
		
		[/part]
		
		[part]
            story= _ "Що ж, минуло тринадцять років після тої сутички з 'весфольками' і одного вечора Гаралін, як і завжди, вибрався вночі з хати, щоб спробувати попрактикувати ту магію, яку він майже безуспішно намагався вивчити вже більше 13 років."
        [/part]
	[/story]
	
	{CTL_GIE_TRACK {JOURNEY_02} }
	
	{DEFAULT_SCHEDULE_FIRST_WATCH}
	
	[side]
	id,defeat_condition=haralin,never
		
        {GOLD 100 75 50}
        {INCOME 0 -5 -10}
        controller=human
        team_name=Islefolk
        shroud=no
        fog=no
        {FLAG_VARIANT long}
        user_team_name=_"Islefolk"
    [/side]
	{STARTING_VILLAGES_ALL 1}


    [side]
        side=2
        {GOLD 100 150 200}
        {INCOME 0 0 0}
		controller=ai
        
        shroud=yes
        fog=no
        team_name=Wesfolk
        user_team_name=_ "Wesfolk"
               {FLAG_VARIANT ragged}
        recruit=bandit, Skeleton, Skeleton Archer, Footpad, Walking Corpse
    [/side]
	
	
	    [event]
        name=prestart
        # set starting scenario objectives
        [objectives]
			[objective]
                description=_ "Evacuate all children"
                condition=win
            [/objective]
            [objective]
                description= _ "Death of any children"
                condition=lose
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
		
		{GENERIC_UNIT 1 (Peasant) 24 7 ({FACING e})}
		{GENERIC_UNIT 1 (Peasant) 26 5 ({FACING e})}
		
		[unit]
            id=guard4
			type=Spearman
			name= _ "Aenyc"
            side=1
			facing=n
            x=13
            y=2
            {IS_LOYAL}
        [/unit]
			
		[modify_unit]
		[filter]
		    id=father,guard1,guard2,guard3
		[/filter]
		{TRAIT_AGED}
		
		[/modify_unit]
		
		  {RECALL_XY haralin 22 25}
	[store_unit]
            {FILTER id=haralin}
            variable,kill=Haralin,yes
        [/store_unit]
		[unit]
            {SINGLEUNITWML_HARALIN}
            type,name=haralin_1,_"Haralin"
            x,y,profile=$Haralin.x,$Haralin.y,portraits/haralin/haralin_1.webp
        [/unit]
        {CLEAR_VARIABLE Haralin}
        {MODIFY_UNIT id=haralin facing ne}
		{MODIFY_UNIT id=haralin experience {ON_DIFFICULTY 38 33 28}}
        [set_extra_recruit]
            id=haralin
            extra_recruit={HARALIN_RAIDERS_RECRUIT}
        [/set_extra_recruit]
		
		[hide_unit]
		id=haralin
		[/hide_unit]
		
		{VARIABLE book 0}
		
      [/event]
	  
	  [event]
	  name=start
  
				    [scroll_to]
                        x,y=21,25
                    [/scroll_to]
					
	    {DELAY 500}
	  
	  [move_unit_fake]
	  type=haralin_1
	  x=21,22
	  y=25,25
	  [/move_unit_fake]
	  
	[unhide_unit]
	id=haralin
	[/unhide_unit]
		
		{VARIABLE unlock_magic_blast yes}
        {VARIABLE unlock_levitate      yes}
        {VARIABLE skill_magic_blast  yes}
        {VARIABLE skill_levitate       yes}
		{FIRE_EVENT refresh_haralin_skills}
		
		{DELAY 1000}
		
		{MODIFY_UNIT id=haralin facing nw} {DELAY 500}
		{MODIFY_UNIT id=haralin facing ne} {DELAY 500}
		
		[message]
	  speaker=haralin
	  message=_ "Що ж, наче нікого не видно... Сподіваюся, цього разу мені вдасться це заклинання."
	  [/message]
	  
	  {DELAY 1000}

	  
	  [message]
	  speaker=haralin
	  message=_ "Іменем Світла, da mihi potestatem ad consurgam in caelo!"
	  [/message]
	  
	  {ANIMATE_UNIT id=haralin skill_levitate}
        [modify_unit]
            {FILTER id=haralin}
            [object]
                duration,id=turn,skill_levitate
                {EFFECT new_ability ([abilities]
                    [skirmisher]
                        id,affect_self=skirmisher,yes
                    [/skirmisher]
                [/abilities])}
                {EFFECT defense (replace=yes
                    [defense]
                        {FLY_DEFENSE -50} # 50% hit-chance on all terrain
                    [/defense])}
                {EFFECT movement_costs (replace=yes
                    [movement_costs]
                        {FLY_MOVE} # fast movement on most terrains
                    [/movement_costs])}
            [/object]
        [/modify_unit]
		
	  [message]
	  speaker=haralin
	  message=_ "ТАК! Слава Світлу, я літаю! Це... Це неймовірно! Нарешті, після стількох років в мене почало виходити! Я відчуваю силу Світла, що тече крізь мене, вона пронизує все довкола, і тепер я можу користуватися нею."
	  [/message]
	  
	  {DELAY 1000}
	  
	  [message]
	  speaker=narrator
	  message=_ "Поки Гаралін радів своїм першим успіхам, на півночі села старому Батькові щось зовсім не спалося, його щось сильно непокоїло, тож він вирішив навідатися до сільського вартового."
	  [/message]
	  
				    [scroll_to]
                        x,y=19,4
                    [/scroll_to]
					
	    {DELAY 1000}
	  
	  [move_unit_fake]
		type=father_old
		x=19,18,17,16,15,14
		y=4,4,4,3,3,2
		[/move_unit_fake]
		
		{RECALL_XY father 14 2}
		
		[modify_unit]
		[filter]
		    id=father
		[/filter]
		profile="portraits/islefolk/father_old_4.png"
		canrecruit=no
		{TRAIT_LOYAL}
		
		[/modify_unit]
		
		[transform_unit]
		    id=father
		transform_to = father_old
		[/transform_unit]
		
		{MODIFY_UNIT id=father facing nw}
		
		[message]
	  speaker=father
	  message=_ "Що там, Aenyc, все спокійно?"
	  [/message]
	  
	  {MODIFY_UNIT id=guard4 facing se}
	  
	  [message]
	  speaker=guard4
	  message=_ "Нікого не видно, старійшино. Краще повертайтеся до своєї хати, ви ж майже сліпі. Ви захищали село в свій час, тепер відпочивайте."
	  [/message]
	  
	  [message]
	  speaker=father
	  message=_ "Та й, тяжко мені чогось на серці... Відчуваю, наче Королі не зможуть нас захистити від тих 'весфольків'. Що ми робитимемо, коли прийдуть мерці?"
	  [/message]
	  
	  [message]
	  speaker=guard4
	  message=_ "<i>Знову старий за своє. Я теж хвилююся за це, але ми звичайні селяни, що поробиш?</i>   Все буде добре, пане, теперішня варта нічим не гірша, за вашу. Давайте я проведу вас додому."
	  [/message]
	  
	  [message]
	  speaker=father
	  message=_ "Та й, що ж... У мене все одно нема вибору, я вже старий і нічого не поробиш. Уся надія на вас та на мого сина."
	  [/message]
	  
	  [move_unit]
		id=father
		to_x=15
		to_y=3
		[/move_unit]
		
		[move_unit]
		id=guard4
		to_x=14
		to_y=2
		[/move_unit]
		
		
		[message]
	  speaker=guard4
	  message=_ "На Гараліна? Останніми роками він щось взагалі усамітнився, живе у лісі за селом та тут майже не показується. Люди кажуть, що після тієї битви щось в нього вселилося."
	  [/message]
	  
	  [move_unit]
		id=father
		to_x=16
		to_y=3
		[/move_unit]
		
		[move_unit]
		id=guard4
		to_x=15
		to_y=3
		[/move_unit]
		
		[move_unit_fake]
		type=Vampire Bat
		side=2
		x=7,6,5,4,3,2,1
		y=1,1,2,2,3,2,2
		[/move_unit_fake]
		
		[message]
	  speaker=father
	  message=_ "Дурню ті люди кажуть, Гаралін роздобув собі десь меча та постійно фехтував. Останнього разу, коли мої очі бачили, він вже був вправним юнаком."
	  [/message]
	  
	  [move_unit]
		id=father
		to_x=17
		to_y=4
		[/move_unit]
		
		[move_unit]
		id=guard4
		to_x=16
		to_y=3
		[/move_unit]
		
		[message]
	  speaker=guard4
	  message=_ "Ну, що ж. Якщо ви таке кажете, то, мабуть, так воно і є. Але чому відлюдником став? Це найбільше хвилює, бо наша громада завжди дружньою була, як одна велика сім'я разом жили."
	  [/message]
	  
	  [move_unit]
		id=father
		to_x=18
		to_y=4
		[/move_unit]
		
		[move_unit]
		id=guard4
		to_x=17
		to_y=4
		[/move_unit]
		
		[move_unit_fake]
		type=Skeleton
		side=2
		x=11,12,13
		y=1,1,2
		[/move_unit_fake]
		
		[unit]
            id=skeleton1
			type=Skeleton
			name=_ " "
            side=2
			facing=se
            x=13
            y=2
        [/unit]
		
		[message]
	  speaker=father
	  message=_ "Та й, чого не знаю, того не знаю. Все після того нападу розбійників змінилося, він ще й спокійно спати припинив... Все після того нападу..."
	  [/message]
	  
	  [move_unit]
		id=father
		to_x=19
		to_y=4
		[/move_unit]
		
		[move_unit]
		id=guard4
		to_x=18
		to_y=4
		[/move_unit]
		
		{MODIFY_UNIT id=father facing sw}
		
		[message]
	  speaker=father
	  message=_ "Що ж, дякую, що провів. Тепер я спокійний, добраніч."
	  [/message]
	  
	  [hide_unit]
	  id=father
	  [/hide_unit]
	  
	  [message]
	  speaker=guard4
	  message=_ "Так, добраніч. <i>А мені треба повертатися на пост, хоча що може в такій глуші статися?</i>"
	  [/message]
	  
	  
	  [move_unit]
		id=guard4
		to_x=14
		to_y=2
		[/move_unit]
		
		[message]
	  speaker=guard4
	  message=_ "Що за..."
	  [/message]
	  
	  [message]
	  speaker=skeleton1
	  message=_ "Хехеххе, чому не на посту, солдате?!"
	  [/message]
	  
	  [harm_unit]
            {FILTER id=guard4} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,9
        [/harm_unit]
		
		[message]
	  speaker=guard4
	  message=_ "Аргх, невже..." ##вартовий шокований, бо вперше бачить мерця
	  [/message]
	  
	  {MODIFY_UNIT id=guard4 facing se}
	  
	  [message]
	  speaker=guard4
	  message=_ "Я маю попере... ух..." ##попередити
	  [/message]
	  
	  [harm_unit]
            {FILTER id=guard4} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,9
        [/harm_unit]
		
		
		[move_unit]
		id=guard4
		to_x=15
		to_y=3
		[/move_unit]
		
		
		[move_unit_fake]
		type=Skeleton
		side=2
		x=17,17,17,16
		y=1,2,3,3
		[/move_unit_fake]
		
		[unit]
            id=skeleton2
			type=Skeleton
			name=_ " "
            side=2
			facing=nw
            x=16
            y=3
        [/unit]
	  
	  
	  [message]
	  speaker=skeleton2
	  message=_ "Куди це ти зібрався, хехех?"
	  [/message]
	  
	  [harm_unit]
            {FILTER id=guard4} {FILTER_SECOND id=skeleton2}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,9
        [/harm_unit]
		
		
		[move_unit]
		id=skeleton1
		to_x=14
		to_y=2
		[/move_unit]
		
		[harm_unit]
            {FILTER id=guard4} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,9
        [/harm_unit]
		
		
		[message]
	  speaker=guard4
	  message=_ "Аааа, ЛЮДИ, мер... Ургхх..."
	  [/message]
		
		
		[harm_unit]
            {FILTER id=guard4} {FILTER_SECOND id=skeleton2}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=yes,yes,9
        [/harm_unit]
		
		
		[move_unit_fake]
		type=Skeleton Archer
		side=2
		x=9,9,9,10
		y=1,2,3,3
		[/move_unit_fake]
		
		[unit]
            id=skeleton3
			type=Skeleton Archer
			name=_ " "
            side=2
			facing=nw
            x=10
            y=3
        [/unit]
		
		[message]
	  speaker=skeleton3
	  message=_ "Володарко, варту... вбито... безшумно..."
	  [/message]
	  
	  [move_unit_fake]
		type=Dark Sorcerer
		gender=female
		side=2
		x=11,12,13
		y=1,1,2
		[/move_unit_fake]
	  
	  
	  
	  [unit]
	  id=dark_sorcerer_2
        type=Dark Sorcerer
		gender=female
		side=2
		x=13
		y=2
        canrecruit=yes
		[/unit]
		
		[message]
	  speaker=dark_sorcerer_2
	  message=_ "Гарна робота, мої слуги, наш Володар-Ліч буде задоволений. Тепер убийте усіх селюків, не щадіть нікого!"
	  [/message]
	  
	  [message]
	  speaker=skeleton2
	  message=_ "Так, Володарко..."
	  [/message]
	  
	  [move_unit]
		id=skeleton2
		to_x=18
		to_y=4
		[/move_unit]
		
		[move_unit]
		id=skeleton1
		to_x=16
		to_y=5
		[/move_unit]
		
		
		
		[message]
                        speaker=narrator
                        message= {CAPTION ( _ "???")} + _"Гараліне, невже ти запізнишся?"
                    [/message]
					
					{MODIFY_UNIT id=haralin facing nw} {DELAY 500}
		{MODIFY_UNIT id=haralin facing ne} {DELAY 500}
				
				
		[message]
        speaker=haralin
        message=_"В ім'я Світла, про що це ти?"
        [/message]
		
		[message]
            speaker=narrator
            message= {CAPTION ( _ "???")} + _"..."
        [/message]
		
		[scroll_to]
                        x,y=19,1
                    [/scroll_to]
					
					{DELAY 1000}
					
		[unhide_unit]
	        id=father
	  [/unhide_unit]
	  
	  {MODIFY_UNIT id=father facing nw} {DELAY 500}
	  {MODIFY_UNIT id=father facing ne} {DELAY 500}
	  {MODIFY_UNIT id=father facing nw} {DELAY 500}
	  
	  [message]
        speaker=father
        message=_"Мені почулися крики Aenyc. Та й... Мабуть-таки, почулося..."
      [/message]
	  
	  [message]
        speaker=skeleton2
        message=_"*клац-клац*"
      [/message]
	  
	  [message]
        speaker=father
        message=_"Га? Хто тут?.. <i>Почекай, крики, дивне клацання. Невже це...</i>"
      [/message]
	  
	  [message]
        speaker=skeleton2
        message=_"Хехехе, зустрінь свою сме..."
      [/message]
	  
	  [message]
        speaker=father
        message=_"НА НАС НАПАЛИ!!! МЕРЦІ ВЖЕ ТУТ! АРГХ..."
      [/message]
	  
	  [harm_unit]
            {FILTER id=father} {FILTER_SECOND id=skeleton2}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=yes,yes,10
        [/harm_unit]
		
		[message]
        speaker=skeleton2
        message=_"Замовкни, стариганю! І помри!"
      [/message]
	  
	  {DELAY 500}
	  
	    {GENERIC_UNIT 1 (child) 25 3 ({FACING w})}
		{GENERIC_UNIT 1 (child) 24 3 ({FACING e})}
		{GENERIC_UNIT 1 (child) 1 5 ({FACING e})}
		[modify_unit]
		[filter]
		x,y=1,5
		[/filter]
		max_moves=6
		moves=6
		[/modify_unit]
		{GENERIC_UNIT 1 (child) 26 10 ({FACING w})}
		{GENERIC_UNIT 1 (child) 13 14 ({FACING w})}
	    {GENERIC_UNIT 1 (Peasant) 20 12 ({FACING w})}
		
		{RECALL_XY guard1 24 17}
		{RECALL_XY guard2 10 8}
		{RECALL_XY guard3 14 12}
		
		[unit]
            id=peasant_witness
			type=Peasant
            side=1
			facing=n
            x=17
            y=10
        [/unit]
		
		[unit]
            id=peasant_hater
			name= _"Zeham"
			unrenamable=yes
			type=Peasant
            side=1
			facing=n
            x=20
            y=8
        [/unit]
		
		[unit]
            id=daeola_father
			type=Peasant
            side=1
			facing=n
            x=13
            y=7
            {IS_LOYAL}
        [/unit]
		
				
		
		[message]
        speaker=peasant_witness
        message=_"ЛЮДИ! ПРОКИДАЙТЕСЯ НА НАС НАПАЛИ МЕРЦІ!"
      [/message]
	  
	  [message]
        speaker=peasant_hater
        message=_"СЛУХАЙТЕ УСІ, Я НА ВЛАСНІ ОЧІ БАЧИВ, ЯК МЕРЦІ ВБИЛИ НАШОГО СТАРІЙШИНУ!"
      [/message]
	  
	  [message]
        speaker=peasant_witness
        message=_"Що?! Усі до зброї, помстимося за нього та проженемо ворогів!"
      [/message]
	  
	  [message]
        speaker=daeola_father
        message=_"ТАК! СТАВАЙМО ДО ЗБРОЇ! Я НЕ ВІДДАМ ВОРОГУ НІ НАШЕ СЕЛО, НІ НАВІТЬ МОЄЇ ХАТИ!"
      [/message]
	  
	  [message]
	  speaker=skeleton3
	  message=_ "Володарко, вони... знають..."
	  [/message]
	  
	  [message]
	  speaker=dark_sorcerer_2
	  message=_ "Я не глуха. Але нічого страшного, ми швидко їх переріжемо. Продовжуйте атаку!"
	  [/message]
	  
	  [move_unit]
		id=dark_sorcerer_2
		to_x=18
		to_y=6
		[/move_unit]
		
		{DELAY 300}
		
		[move_unit]
		id=skeleton1
		to_x=14
		to_y=6
		[/move_unit]
		
		{DELAY 500}
		
		[message]
        speaker=daeola_father
        message=_"Геть, мерзенно тварюко, геть! Забирайся від моєї сім'ї!"
      [/message]
	  
	  [harm_unit]
            {FILTER id=skeleton1} {FILTER_SECOND id=daeola_father}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,4
        [/harm_unit]
		
		[message]
        speaker=daeola_father
        message=_"Що?! Їх не бере наша зброя!... Але... Але я так просто не відступлю!"
      [/message]
	  
	  [harm_unit]
            {FILTER id=skeleton1} {FILTER_SECOND id=daeola_father}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,4
        [/harm_unit]
	  
	  [message]
        speaker=skeleton1
        message=_"Хехех, тепер моя черга. Ти покійник!"
      [/message]
		
		[harm_unit]
            {FILTER id=daeola_father} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,15
        [/harm_unit]
		
		[harm_unit]
            {FILTER id=daeola_father} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=yes,yes,15
        [/harm_unit]
		
		[message]
        speaker=skeleton1
        message=_"А тепер до тебе приєднаться вся твоя сім'я!"
      [/message]
	 
	 {MOVE_UNIT id=skeleton1 13 7}
	  
	  [hide_unit]
	  id=skeleton1
	  [/hide_unit]
	  
	  {DELAY 500}
	  
	  [sound]
		name=axe.ogg
		[/sound]
		{DELAY 500}
	  [sound]
		name=human-female-die-1.ogg
		[/sound]
		
		{DELAY 500}
		
		[sound]
		name=axe.ogg
		[/sound]
		
		[move_unit_fake]
		type=daeola_0
		x=13,12
		y=7,6
		
		[/move_unit_fake]
		
		[unit]
          id=daeola_child
          type=daeola_0
			name=_ "Daeola"
          side=1
		  [status]
                unhealable=yes
          [/status]
			facing=nw
          x=12
          y=6
        [/unit]
		
		[message]
		speaker=daeola_child
		message=_ "Аааа, рятуйте! Тут, тут скелет! Він.. він всіх... всіх вбив!"
		[/message]
		
		 [sound]
            name=torch.ogg
        [/sound]
        [delay]
            time=200
        [/delay]
        [sound]
            name=wose-die.ogg
        [/sound]
        [terrain]
            x=13
            y=7
            terrain=Dd^Dr
            layer=overlay
        [/terrain]
		{PLACE_IMAGE (scenery/village-human-burned1.png) 13 7}
        [redraw][/redraw]
		
		[unhide_unit]
	  id=skeleton1
	  [/unhide_unit]
		
		
		[message]
		speaker=skeleton1
		message=_ "Хехехе, куди це ти зібралася? Покинеш своїх татуся та матусю?"
		[/message]
		
		[harm_unit]
            {FILTER id=daeola_child} {FILTER_SECOND id=skeleton1}
            [primary_attack]
                range=melee
            [/primary_attack]
            kill,animate,amount=no,yes,9
        [/harm_unit]
		
		[message]
		speaker=daeola_child
		message=_ "Ай-ргх... Хто-небудь, допоможіть!"
		[/message]
		
		[scroll_to]
            x,y=21,25
        [/scroll_to]
					
		[message]
		speaker=haralin
		message=_ "Що це за крики в селі?"
		[/message]
		
		[message]
		speaker=haralin
		message=_ "... Помилуй нас Світло, невже..."
		[/message]
		
		[move_unit]
		id=haralin
		to_x=20
		to_y=17
		[/move_unit]
		
		[modify_unit]
		[filter]
		id=haralin
		[/filter]
		moves=0
		[/modify_unit]
		
		[message]
		speaker=haralin
		message=_ "Що, що тут таке коїться??"
		[/message]
		
		[message]
        speaker=peasant_witness
        message=_"Твій батько був прав, Гараліне, 'весфольки' таки прийшли! Тут живі мерці і ще вони... Зажди... Ти літаєш? Ти що, чаклун??"
        [/message]
	  
	    [message]
		speaker=haralin
		message=_ "<i>Я зовсім забув скасувати заклинання. Схоже, в мене проблеми.</i> Я не..."
		[/message]
		
		[role]
			side=1
            role=Mage_fan
            [not]
                id=haralin, daeola_child, peasant_hater, peasant_witness
            [/not]
        [/role]
		
		[message]
		role=Mage_fan
		message=_ "СЛУХАЙТЕ ВСІ, ГАРАЛІН — ЧАКЛУН! ВІН НАС ЗАХИСТИТЬ СВОЇМИ ЧАРАМИ!"
		[/message]
		
		[message]
		speaker=dark_sorcerer_2
		message=_ "Чаклун? Я ніколи не чула, щоб серед цього жалюгідного народу були маги."
		[/message]
		
		[message]
		speaker=peasant_hater
		message=_ "Ось чому ти живеш за селом, поганцю! Щоб ніхто не заважав тобі користуватися чортівською весфольською магією! Однак з цим розбиратися будем потім, зараз зроби щось корисне!"
		[/message]
		
		 [message]
		speaker=haralin
		message=_ "Я не маю жодного стосунку до 'весфольків'. Все, що я хочу — захистити своє село!"
		[/message]
		
		[message]
		role=Mage_fan
		message=_ "Ми дослухатимемося до твоїх слів, тільки скажи, що нам робити, Гараліне?"
		[/message]
		
		[message]
		speaker=haralin
		message=_ "Ворогів занадто багато, тому ми не зможемо прогнати їх. Ми маємо врятувати наших дітей та літніх людей, а потім... Сподіватися, що все буде добре."
		[/message]
		
		[message]
		speaker=haralin
		message=_ "До речі, що з моїм батьком? Його ж хатина на півночі..."
		[/message]
		
		[message]
		speaker=peasant_witness
		message=_ "..."
		[/message]
		
		[message]
		speaker=peasant_hater
		message=_ "..."
		[/message]
		
		[message]
		role=Mage_fan
		message=_ "..."
		[/message]
		
		[message]
		speaker=haralin
		message=_ "(хапається за голову) О ні, як же так..."
		[/message]
		
		[message]
		speaker=peasant_hater
		message=_ "Твій батько помер героєм, попередивши всіх про атаку. Якби не він, мерці перерізали б наші горлянки, а ми цього навіть не помітили. Зберися, горювати будеш потім, а зараз треба діяти."
		[/message]
		
		[message]
		speaker=haralin
		message=_ "Так... Хай направить нас Світло!"
		[/message]
	  
	    {HIGHLIGHT_IMAGE 27 22 items/gohere.png ()}
		
		{CLEAR_VARIABLE no_spellcasting_event}
		
		[message]
            speaker,image=narrator,wesnoth-icon.png
            message=_"Double-click on Haralin to his cast spells."
        [/message]

	  [/event]
	  
	  [event]
	  name=turn 2
	  
	  #ifdef EASY
		[unit]
            id=guard5
			type=Poacher
            side=1
			facing=ne
            x=2
            y=21
            {IS_LOYAL}
        [/unit]
		#endif
		
		[modify_unit]
		[filter]
		x,y=2,21
		[/filter]
		max_moves=6
		moves=6
		[/modify_unit]
		
		{DELAY 500}
		{MODIFY_UNIT id=guard5 facing nw} {DELAY 500}
	    {MODIFY_UNIT id=guard5 facing ne} {DELAY 500}
		
		[message]
		speaker=guard5
		message= _ "Схож, шо вчасно я не пішов на полювання. Треба допомогти побратимам прогнати сих мертців."
        [/message]		
	  
	  [/event]
	  
	  [event]
	  name=last breath
	  [filter]
	  type=child 
	  [/filter]
	  [filter_second]
	  side=2
	  [/filter_second]
	  
	  [message]
	  speaker=unit
	  message="Аааа, рятуйте! Аааа..."
	  [/message]
	  
	  [message]
	  speaker=haralin
	  message="Ні-ні-ні, не помирай, іменем Світла, хай ніхто з вас не помирає. Будь ласка, ні!"
	  [/message]
	
	  [endlevel]
            result=defeat
        [/endlevel]
	  [/event]
	  
	  [event]
	  name=last breath
	  [filter]
	  type=daeola_0
	  [/filter]
	  [filter_second]
	  side=2
	  [/filter_second]
	  
	  [message]
	  speaker=unit
	  message="Айргх... Мені холодно..."
	  [/message]
	  
	  [message]
	  speaker=haralin
	  message="Ні, Даеоло, не вмирай! Іменем Світла, живи! Будь ласка!"
	  [/message]
	
	  [endlevel]
            result=defeat
        [/endlevel]
	  [/event]
	 
		
		[event]
            name=moveto
			first_time_only=no
            [filter]
				type=child, daeola_0
                x,y=27,22
            [/filter]
			
			[if]
			[have_unit]
			type=daeola_0
			x,y = 27,22
			[/have_unit]
	
			[then]
			{MODIFY_UNIT id=$unit.id facing nw}
			[message]
	        speaker=$unit.id
	        message="Переможіть цих весфольків та поверніться живими!"
	        [/message]
			{MODIFY_UNIT id=$unit.id facing ne}
			[/then]
			[/if]
			
            [kill]
                id=$unit.id
            [/kill]
			
			[if]
                [have_unit]
                    type=child, daeola_0
                [/have_unit]
                [then]
                [/then]
				[else]
				[set_variable]
            name=is_children_saved
            value=_ "true"
        [/set_variable]
		
				[remove_item]
            x,y=27, 22
            image="items/gohere.png"
        [/remove_item]
				{DELAY 500}
				    [scroll_to_unit]
                        id=haralin
                    [/scroll_to_unit]
					
					
					 [if]
                [have_unit]
                    side=1
                    [not]
                        id=haralin
                    [/not]
                [/have_unit]
                [then]
                    [message]
                        speaker=haralin
                        message=_"Дякувати Світлу, ми змогли врятувати всіх дітей. Тепер ми маємо прогнати або хоча б затримати цих нечестивих 'Весфольків'."
                    [/message]
					
					[role]
					side=1
            role=Reporter
            [not]
                id=haralin
            [/not]
        [/role]
					
					
					[message]
                        side=1
						[not]
						id=haralin
						[/not]
						role= Reporter
                        message=_"Їх занадто багато, чи не краще нам відступити?"
                    [/message]
					
					
					
					[if]
               
					[variable]
                name="Raiders_Enemy_Leader_Dead"
                equals=true
            [/variable]
					 [then]
					 [message]
                        speaker=haralin
                        message=_"Ми впораємося, Світло вка..."
                    [/message]
					
					[message]
                        speaker=narrator
                        message= {CAPTION ( _ "???")} + _"Іменем Світла, відходь у болота. Негайно!"
                    [/message]
					
					{MODIFY_UNIT id=haralin facing nw} {DELAY 500}
		            {MODIFY_UNIT id=haralin facing ne} {DELAY 500}
					
					[message]
                        speaker=haralin
                        message=_"<i>Так, усі за мною! Іменем Світла, ми відходимо до боліт!</i>"
                    [/message]
					
					[message]
                        role=Reporter
                        message=_"Ви всі чули Гараліна, вперед!"
                    [/message]
					
					[set_variable]
            name="Raiders_Haralin_Team_Retreat"
            value=_ "true"
        [/set_variable]
					
					[objectives]
			[objective]
                description=_ "Move Haralin to the left edge of the map"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
					
					
				
					 [/then]
					 [else]
					
					
					[message]
                        speaker=haralin
                        message=_"Ми впораємося, Світло вкаже нам шлях."
                    [/message]
					[message]
                        role=Reporter
                        message=_"... Нууу, добре..."
                    [/message]
					
					[objectives]
			[objective]
                description=_ "Defeat enemy leader"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
		
		{VARIABLE Raiders_Turn_Evacuate "$($turn_number + {ON_DIFFICULTY 5 7 10})"}

		[/else]
		[/if]
		 [/then]
                [else]

                    [message]
                        speaker=haralin
                        message=_"Дякувати Світлу, ми змогли врятувати всіх дітей, але я залишився один, всі мої товариші тяжко поранені або полягли."
                    [/message]
					[message]
                        speaker=narrator
                        message= {CAPTION ( _ "???")} + _"Іменем Світла, відходь у болота. Негайно!"
                    [/message]
					
					{MODIFY_UNIT id=haralin facing nw} {DELAY 500}
		            {MODIFY_UNIT id=haralin facing ne} {DELAY 500}
					
					[message]
                        speaker=haralin
                        message=_"<i>Так, я відступлю туди, щоб відволікти та затримати цих мерзенних 'Весфольків', щоб діти змогли втекти якнайдалі.</i>"
                    [/message]
		
		[set_variable]
            name=Raiders_Haralin_Alone_Retreat
            value=_ "true"
        [/set_variable]
					
					[objectives]
			[objective]
                description=_ "Move Haralin to the left edge of the map"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
					
                [/else]
            [/if]
                    
                [/else]
            [/if]
        [/event]
		
		
		[event]
		name=last breath
		[filter]
            id=dark_sorcerer_2
        [/filter]
		
		[set_variable]
            name=dark_sorcerer_2_name
            value= $unit.name
        [/set_variable]
		
		[set_variable]
            name=book_2_x
            value= $unit.x
        [/set_variable]
		
		[set_variable]
            name=book_2_y
            value= $unit.y
        [/set_variable]
		
		[message]
		speaker=dark_sorcerer_2
		message= _"Володарю Кароре, я не впоралась з цими селюками... Ургх..."
		[/message]
		
		[set_variable]
            name="Raiders_Enemy_Leader_Dead"
            value= _ "true"
        [/set_variable]
		
		[set_variable]
            name=who_killed_dark_sorcerer_2
            value=$second_unit.id
        [/set_variable]
		
		[if]
		[variable]
                name="who_killed_dark_sorcerer_2"
                equals=haralin
            [/variable]
            [then]
                [message]
		speaker=second_unit
		message= _"Володар-Ліч Карор! Хай помилує нас Світло! Це ж той могутній чаклун-мрець, один з тих, хто керує цими 'Весфольками'!"
		[/message]
            [/then]
            [else]
                [message]
		speaker=second_unit
		message= _"Володар Карор? Я чув чутки про нього, що це живий та могутній мрець!"
		[/message]
		[message]
		speaker=haralin
		message= _"Так, хай змилується над нами Світло! Це дуже страшне та небезпечно чудовисько."
		[/message]
		
            [/else]
        [/if]
		
		[if]
		[variable]
                name="is_children_saved"
                equals=true
            [/variable]
            [then]
			
			
			[if]
                [have_unit]
                    side=1
                    [not]
                        id=haralin
                    [/not]
                [/have_unit]
                [then]
				
				
				 [message]
		speaker=haralin
		message= _ "Моє відчуття каже, що цей Карор може бути поруч, тому краще забиратися звідси, тим паче нам вдалося врятувати всіх дітей. За мною!"
		[/message]
		
		[set_variable]
            name="Raiders_Haralin_Team_Retreat"
            value= _ "true"
        [/set_variable]
		
		
		[objectives]
			[objective]
                description=_ "Move Haralin to the left edge of the map"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
						
				[/then]
				[else]
				
				[message]
		speaker=haralin
		message= _ "Моє відчуття каже, що цей Карор може бути поруч, тому краще забиратися звідси, тим паче мені вдалося врятувати всіх дітей. Я відходжу!"
		[/message]
		
		[set_variable]
            name="Raiders_Haralin_Alone_Retreat"
            value= _ "true"
        [/set_variable]
		
		
		[objectives]
			[objective]
                description=_ "Move Haralin to the left edge of the map"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
			
			
			
		[/else]
		[/if]
		
			[/then]
			[else]
                [message]
		speaker=haralin
		message= _ "Моє відчуття каже, що цей Карор може бути поруч, краще забиратися звідси, але спочатку необхідно вивести всіх дітей!"
		[/message]
		
            [/else]
			
			[/if]
		
		{PLACE_IMAGE (items/book5.png) $book_2_x $book_2_y}
			
			
			
			[/event]
			
			
		[event]
		name=moveto
		first_time_only=no
		
		[filter]
		side=1
		x=$book_2_x
		y=$book_2_y
		[/filter]
		
		[if]
		[variable]
		name=unit.id 
		equals=haralin
		[/variable]
        [then]	
	    [message]
		speaker=unit
		message= _ "Що це, ще одна книга магії? Обов'язково прочитаю її у вільний час!"
		[/message]
		
		[message]
		speaker,image=narrator,wesnoth-icon.png
		message= _ "Наступного сценарію Гаралін знатиме ще одне додаткове закляття — Mnemonic."
		[/message]
		
		[set_variable]
            name="Haralin_learn_Mnemonic"
            value= _ "true"
		[/set_variable]
		
		
		[remove_item]
            x,y=$book_2_x,$book_2_y
            image="items/book5.png"
        [/remove_item]
		
		{CLEAR_VARIABLE book_2_x}
		{CLEAR_VARIABLE book_2_y}
		
		{VARIABLE_OP book add 1}
		[progress_achievement]
            content_for=wesnoth-Chasing_the_Light
            id="ctl_book"
            amount=1
            limit=$book
        [/progress_achievement]
		
		[/then]
		[else]
		[message]
		speaker=unit
		message= _ "Я навіть читати не вмію, нащо воно мені треба?"
		[/message]
		[/else][/if]
		[/event]
	
		
		[event]
		name=moveto
		first_time_only=no
		[filter]
		id=haralin
		x=1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
		y=1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27
		[/filter]
		[if]
		[variable]
                name="Raiders_Haralin_Alone_Retreat"
                equals=true
            [/variable]
			[or]
			[variable]
                name="Raiders_Haralin_Team_Retreat"
                equals=true
            [/variable]			
			[/or]
            [then]
                [message]
		speaker=haralin
		message= _ "Спробуйте мене спіймати, якщо зможете! Світло захистить мене від вас, мерзенні тварюки!"
		[/message]
		
		[if]
			[have_unit]
			id=dark_sorcerer_2
			[/have_unit]
	
			[then]
			[message]
	        speaker=dark_sorcerer_2
	        message=_ "Переслідуйте його, мої воїни! Ми не можемо залишити в живих цього мага, хоч би яким жалюгідним він не був!"
	        [/message]
			[/then]
			[else]
                [message]
		side=2
		message= _"За ним, за ним! Ми маємо прибити цього самоучку та помститися за $dark_sorcerer_2_name|!"
		[/message]
		
            [/else]
			[/if]
			
			
			 [if]
                [have_unit]
                    side=1
                    [not]
                        id=haralin
                    [/not]
                [/have_unit]
                [then]
				[set_variable]
            name="Raiders_Haralin_Team_Retreat"
            value= _ "true"
        [/set_variable]
		[set_variable]
            name="Raiders_Haralin_Alone_Retreat"
            value= _ "false"
        [/set_variable]
				
				
				[/then]
				[else]
				[set_variable]
            name="Raiders_Haralin_Team_Retreat"
            value= _ "false"
        [/set_variable]
		[set_variable]
            name="Raiders_Haralin_Alone_Retreat"
            value= _ "true"
        [/set_variable]
				
				
				[/else]
				[/if]
				
##				[kill]
##x,y=recall,recall
##[/kill]
				
			[endlevel] 
            result=victory
        [/endlevel]
            [/then]
			
			[/if]
		[/event]
		
		
		##на якомусь ходу після евакуації дати завдання відступити
		
		[event]
		name= turn $Raiders_Turn_Evacuate
		
		[scroll_to_unit]
            id=haralin
        [/scroll_to_unit]
		
		[message]
                        speaker=narrator
                        message= {CAPTION ( _ "???")} + _"Іменем Світла, відходь у болота. Негайно!"
                    [/message]
					
					{MODIFY_UNIT id=haralin facing nw} {DELAY 500}
		            {MODIFY_UNIT id=haralin facing ne} {DELAY 500}
					
					 [if]
                [have_unit]
                    side=1
                    [not]
                        id=haralin
                    [/not]
                [/have_unit]
                [then]
				       [message]
		speaker=haralin
		message= _ "Так, краще забиратися звідси, тим паче нам вдалося врятувати всіх дітей. За мною!"
		[/message]
		
		[set_variable]
            name="Raiders_Haralin_Team_Retreat"
            value=_ "true"
        [/set_variable]
		
		[/then]
		[else]
		
		[message]
		speaker=haralin
		message= _ "Так, краще забиратися звідси, тим паче мені вдалося врятувати всіх дітей. Я відходжу!"
		[/message]
		
		
		
		
		[set_variable]
            name="Raiders_Haralin_Alone_Retreat"
            value=_ "true"
        [/set_variable]
		
		[/else][/if]
		
		
		[objectives]
			[objective]
                description=_ "Move Haralin to the left edge of the map"
                condition=win
            [/objective]
			[objective]
                description= _ "Death of Haralin"
                condition=lose
            [/objective]
        [/objectives]
				
		[/event]
		
		
		[event]
		  name=attack
		  [filter_attack]
		  range=ranged
		  [/filter_attack]
		  [filter]
            id=haralin
        [/filter]
		
		[message]
            speaker=haralin
            message=_"Відчуй на собі силу самого Світла! <i>Це перший раз, коли я використовую це заклинання, хай воно спрацює.</i>"
        [/message]
		[sound]
		name=human-hit-2.ogg
		[/sound]
		[message]
            speaker=haralin
            message=_"Ай, це боляче!"
        [/message]

		[message]
            speaker=dark_sorcerer_2
            message=_"Це навіть не магія. Жалюгідне блазнівство."
        [/message]
		[/event]
		
		[event]
		  name=attack
		  first_time_only=no
		  [filter_attack]
		  range=ranged
		  [/filter_attack]
		  [filter]
            id=haralin
        [/filter]
		
		[sound]
		name=human-hit-2.ogg
		[/sound]
		[harm_unit]
		[filter]
            id=haralin
        [/filter]
		amount = {ON_DIFFICULTY 1 2 3}
		[/harm_unit]
		[if]
		[variable]
		name=unit.hitpoints
        less_than=1
		[/variable]
		[then]
		[endlevel]
            result=defeat
        [/endlevel]
		[/then][/if]
		      [/event]
			  
			  
	[event]
        name=moveto
        first_time_only=no
        [filter]
            [filter_location]
                terrain=*^V*
            [/filter_location]
            side=2
        [/filter]
        [sound]
            name=torch.ogg
        [/sound]
        [delay]
            time=200
        [/delay]
        [sound]
            name=wose-die.ogg
        [/sound]
        [terrain]
            x=$x1
            y=$y1
            terrain=Dd^Dr
            layer=overlay
        [/terrain]
		{PLACE_IMAGE (scenery/village-human-burned2.png) $x1 $y1}
        [redraw][/redraw]
    [/event]
	
	###reinforcments
	
	[event]
	name= side 2 turn {ON_DIFFICULTY 14 13 12}
	[message]
		side=2
		message=_ "Надійшло підкріплення, готуйтеся до смерті, селюки!"
		[/message]
	
	[message]
		speaker=haralin
		message=_ "О ні, схоже, що основні війська 'весфольків' на підході. Треба якнайшвидше закінчувати всі справи та забиратися звідси!"
		[/message]
	[/event]

    [event]
	name,first_time_only=side 2 turn refresh,no
        {FILTER_CONDITION(
                  {VARIABLE_CONDITIONAL turn_number equals {ON_DIFFICULTY 14 13 12}}
            {OR(  {VARIABLE_CONDITIONAL turn_number equals {ON_DIFFICULTY 16 15 14}}  )}
            {OR(  {VARIABLE_CONDITIONAL turn_number equals {ON_DIFFICULTY 18 17 16}}  )}
            {OR(  {VARIABLE_CONDITIONAL turn_number equals {ON_DIFFICULTY 20 19 18}}  )}
            {OR(  {VARIABLE_CONDITIONAL turn_number equals {ON_DIFFICULTY 22 21 20}}  )}
            {OR(  {VARIABLE_CONDITIONAL turn_number greater_than_equal_to {ON_DIFFICULTY 24 23 22}}  )}
        )}

        {GENERIC_UNITC 2 {ON_DIFFICULTY "Skeleton"         "Skeleton"           "Revenant" } 23  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "Vampire Bat"      "Footpad"        "bandit"} 3  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "Skeleton"         "bandit_net"         "bandit_net"} 2  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "Skeleton Archer"  "Skeleton Archer"    "Bone Shooter"} 10  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "none"             "Dark Adept"         "Dark Sorcerer"} 12  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "none"             "Soulless"           "Skeleton"} 20  1 ({ANIMATE})}
        {GENERIC_UNITC 2 {ON_DIFFICULTY "none"             "none"               "Skeleton"} 21  1 ({ANIMATE})}	
		
		[/event]

	{HERODEATH_HARALIN}
	{HERODEATH_HATER}

[/scenario]